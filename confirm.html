<!DOCTYPE html>
<html>
<head>
    <title>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <div id="message">
        <h2>Ø¬Ø§Ø±Ù ØªØ£ÙƒÙŠØ¯ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ...</h2>
    </div>

    <script>
        // ğŸ”§ Ø¥Ø¹Ø¯Ø§Ø¯ Supabase - Ø¶Ø¹ Ù…ÙØ§ØªÙŠØ­Ùƒ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù‡Ù†Ø§
        const supabaseUrl = 'https://sjipwstkvvrautexigmt.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNqaXB3c3RrdnZyYXV0ZXhpZ210Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg5MTE5MDcsImV4cCI6MjA3NDQ4NzkwN30.FSh2yIdZdvdNvtWxK5JB02PIdWOG3707qO-F0c84PnY';
        const supabase = supabase.createClient(supabaseUrl, supabaseKey);

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¨Ø±ÙŠØ¯
        async function confirmEmail() {
            try {
                console.log('Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ£ÙƒÙŠØ¯...');
                
                const { data: { session }, error } = await supabase.auth.getSession();
                
                if (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¬Ù„Ø³Ø©:', error);
                    document.getElementById('message').innerHTML = `
                        <h2>âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ£ÙƒÙŠØ¯</h2>
                        <p>${error.message}</p>
                        <a href="login.html">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
                    `;
                    return;
                }
                
                console.log('Ø§Ù„Ø¬Ù„Ø³Ø©:', session);
                
                if (session && session.user) {
                    console.log('Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', session.user);
                    
                    document.getElementById('message').innerHTML = `
                        <h2>âœ… ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¨Ù†Ø¬Ø§Ø­!</h2>
                        <p>Ù…Ø±Ø­Ø¨Ø§Ù‹ ${session.user.email}</p>
                        <p>Ø³ÙŠØªÙ… ØªÙˆØ¬ÙŠÙ‡Ùƒ Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø®Ù„Ø§Ù„ 3 Ø«ÙˆØ§Ù†Ù...</p>
                    `;
                    
                    // Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†ÙŠ
                    setTimeout(() => {
                        window.location.href = 'home.html';
                    }, 3000);
                    
                } else {
                    console.log('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¬Ù„Ø³Ø© Ù†Ø´Ø·Ø©');
                    document.getElementById('message').innerHTML = `
                        <h2>âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¬Ù„Ø³Ø© Ù†Ø´Ø·Ø©</h2>
                        <p>ÙŠØ±Ø¬Ù‰:</p>
                        <ul>
                            <li>Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ£ÙƒÙŠØ¯</li>
                            <li>Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¹Ø¯Ù… Ø§Ù†ØªÙ‡Ø§Ø¡ ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ø±Ø§Ø¨Ø·</li>
                            <li><a href="login.html">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø¬Ø¯Ø¯Ø§Ù‹</a></li>
                        </ul>
                    `;
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹:', error);
                document.getElementById('message').innerHTML = `
                    <h2>âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹</h2>
                    <p>${error.message}</p>
                    <a href="login.html">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a>
                `;
            }
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ£ÙƒÙŠØ¯ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', function() {
            confirmEmail();
        });
    </script>
</body>
</html>
